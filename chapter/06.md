# Chapter 6 - Data views

-  Skill 16 - Crud views
-  Skill 17 - Migration
-  Skill 18 - Database deployment
- [Project 6 - Data Views -  Superhero Records](../project/6)

![Chapter 6](img/chapter-6.jpg)

---

11.md:# Lesson 11 - List View
11.md:### Week 4 - Data
11.md:### ListView
11.md:## BUILD - ListView
11.md:### Aliases
11.md:### ListView - Template
11.md:### ListView - View
11.md:### ListView - URL
11.md:### ListView - Test
11.md:## BUILD - DetailView
11.md:### DetailView - Template
11.md:### DetailView - View
11.md:### DetailView - URL
11.md:### DetailView - Test
11.md:## BUILD - Tests
11.md:### Django Tests

15.md:# Lesson 15 - Forms for Data
15.md:### Django for Beginners
15.md:### Admin Views
15.md:### Using Forms
15.md:### Cross-Site Request Forgery
15.md:### Book Builder Demo
15.md:### Create Week6 code
15.md:### Settings Design Pattern
15.md:### Data Model Design Pattern 
15.md:### CRUD Design Pattern
15.md:### Data Views Design Pattern
15.md:### Data Views URLs Design Pattern
15.md:### Data Views Templates Design Pattern
15.md:### Data Views Design Pattern

### Digital Ocean Settings

### App-Level Environment variables.

Your App Platform apps will have several components

* Django app (ProfileApp)
* Static web server
* Database

Configure App-Level Environment variables (not Component Variables)

* Go To https://cloud.digitalocean.com/apps  
* Select "profile-app"

Click Settings and scroll down to "App-Level Environment Variables"

Add the following key/value pairs

    DEBUG = 0
    DISABLE_COLLECTSTATIC = 1
    
    DJANGO_ALLOWED_HOST = .ondigitalocean.app

    DJANGO_SECRET_KEY = create-a-secure-one (& choose encrypt)
    DJANGO_SUPERUSER_EMAIL = your@email.com
    DJANGO_SUPERUSER_USERNAME = yourusername
    DJANGO_SUPERUSER_PASSWORD = create-a-secure-one (& choose encrypt)

    To make secure keys/passwords, consider this post.

Click Save.

* Changing the variables will kick off a build cycle
* This will take 10 minutes

Environment Variables

![App Platform Env](img/AP_Env.png)


### Step 4 - Add a Static Server

Static web server

![App Platform Static](img/AP_Static.png)

Note the cost is free for static websites

![App Platform Cost](img/AP_Cost.png)

Page from Static Website

![App Platform Profile](img/AP_Profile.png)



### Step 4 - Pre-deploy Job

In App Platform, we'll do this using a Job Component with your app project.

* Go to https://cloud.digitalocean.com/apps
* Select "profile-app"
* Click Settings
* Click + Add Component.
* Click Job
    * Source - Github
    * Repository "<your-name>/BACS350"
    * Branch - main
    * Type Jobs - click "Edit and change When to Run" to "Before every Deploy"

Add Run command:

    python manage.py migrate --noinput
    python manage.py createsuperuser --noinput --email me@here.us

Make sure you have variables set in "settings.py"

    DJANGO_SUPERUSER_USERNAME
    DJANGO_SUPERUSER_PASSWORD

**Name your job** django migrate

Select the minimum resources to run this job. (mine was Basic with $0.007/hr container size)

Click Launch
